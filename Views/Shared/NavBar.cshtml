<!DOCTYPE html>

<html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <style>
            #navbar_body {
                margin: 0;
                background-color: #D8D8D8;
            }

            #navbar_ul {
              list-style-type: none;
              margin: 0;
              padding: 0;
              overflow: hidden;
              background-color: #F56600;
            }

            #navbar_li {
              float: left;
            }

            #navbar_li a {
              display: block;
              color: #522D80;
              text-align: center;
              padding: 14px 16px;
              text-decoration: none;
              font-weight: bold;
              font-size: 18px;
            }

            #navbar_li a:hover {
              background-color: #CC5100;
            }

            #default_div {
                margin: 10px;
                margin-left: auto;
                margin-right: auto;
                text-align: center;
            }

            table, th, td {
                border:1px solid black;
                border-collapse: collapse;
                padding: 5px;
            }
            .center {
                margin-left: auto;
                margin-right: auto;
                text-align: center;
            }
        </style>
    </head>
    <body id="navbar_body">
        <ul id="navbar_ul">
            <li id="navbar_li"><a href="/App/#home">Home</a></li>
            <li id="navbar_li"><a href="/Events/Submit">Events</a></li>
            <li id="navbar_li"><a href="/Events/Index">Show Events</a></li>
            <li id="navbar_li"><a href="/Users/Submit">Users</a></li>
            <li id="navbar_li"><a href="/Users/Index">Show Users</a></li>
            <li id="navbar_li"><a href="/Tickets/Submit">Tickets</a></li>
            <li id="navbar_li"><a href="/Tickets/Index">Show Tickets</a></li>
        </ul>
        <div id="default_div">
            @RenderBody()
        </div>

        <script>
            function getCookie(cname) {
                let name = cname + "=";
                let decodedCookie = decodeURIComponent(document.cookie);
                let ca = decodedCookie.split(';');
                for(let i = 0; i <ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
                }
                return "";
            }

            function loggedIn(){
                if (getCookie("userId") == ""){
                    return false
                } else {
                    return true
                }
            }

            let navbar = document.getElementById("navbar_ul")
            if (loggedIn()){
                let myTickets = document.createElement('li')
                myTickets.id = "navbar_li"
                let myTicketsLink = document.createElement('a')
                myTicketsLink.text = "My Tickets"
                myTicketsLink.href = "/Tickets/MyTickets"
                myTickets.append(myTicketsLink)
                navbar.append(myTickets)

                let logout = document.createElement('li')
                logout.id = "navbar_li"
                let logoutButton = document.createElement('button')
                logoutButton.innerHTML = "Logout"
                logoutButton.onclick = function () {
                    document.cookie = 'userId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;'
                    location.reload()
                }
                logout.append(logoutButton)
                navbar.append(logout)
            } else {
                let login = document.createElement('li')
                login.id = "navbar_li"
                let loginLink = document.createElement('a')
                loginLink.text = "Login"
                loginLink.href = "/Users/Login"
                login.append(loginLink)
                navbar.append(login)
            }
        </script>
    </body>
</html>
